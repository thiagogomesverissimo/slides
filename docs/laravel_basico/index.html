<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>slides</title>

    <meta name="description" content="slides para treinamento na USP">
    <meta name="author" content="uspdev">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/league.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="css/highlight/styles/zenburn.css" id="highlight-theme">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <link rel="stylesheet" href="css/custom.css">

  </head>

  <body>

    <div class="reveal">
      <div class="slides"><section id="chapter-intro" class="chapter">
<section id="intro-uspdev" class="slide" data-has-notes="false">
<h2>Laravel Básico</h2><p><img src="./images/uspdev.png" height="220px" /></p>
</section>

<section id="intro-frameworks" class="slide" data-has-notes="false">
<h2>Frameworks</h2><ul>
<li>separação da aplicação em componentes:<ul>
<li>simplicidade</li>
<li>nichos especializado</li>
</ul>
</li>
<li>&quot;terceirização&quot; das escolhas </li>
<li>seleção de componentes</li>
<li>configurações pré-estabelecidas</li>
<li>implementar uma ideia de forma rápida</li>
</ul>
</section>

<section id="intro-mvc" class="slide" data-has-notes="false">
<h2>MVC</h2><p><img src="./images/mvc.jpg"></p>
</section>

<section id="intro-model" class="slide" data-has-notes="false">
<h2>Model usado neste curso</h2><p>Implementaremos as camadas MVC para manipular os dados desse 
<em>schema</em>:</p>
<p><img src="./images/model.png"></p>
</section>
</section>

<section id="chapter-infra" class="chapter">
<section id="infra-infra" class="slide" data-has-notes="false">
<h1>Preparação da infra</h1>

<p><img src="./images/construction-company.png" height="400px" /></p>
</section>

<section id="infra-requisitos" class="slide" data-has-notes="false">
<h2>Requisitos mínimos</h2><ul>
<li>php7+</li>
<li>mysql-server</li>
<li>composer</li>
<li>git</li>
</ul>
<p><br>
<br></p>
<h2>Good luck for you!</h2>
</section>

<section id="infra-ova" class="slide" data-has-notes="false">
<h3>Dica</h3><p><img src="./images/virtualbox.png" height="130px"></p>
<p>Instale o Virtualbox em seu SO:</p>
<pre><code><span class="hljs-symbol">https:</span>//www.virtualbox<span class="hljs-meta">.org</span>/wiki/Downloads
</code></pre><p>Importar .ova com tudo que é necessário para os treinamentos:</p>
<pre><code><span class="hljs-symbol">https:</span><span class="hljs-comment">//uspdev.github.io/treinamentos</span>
</code></pre>
</section>

<section id="infra-ondrej" class="slide" data-has-notes="false">
<h3>Dica</h3><p><img src="./images/php7.jpg" height="200px"></p>
<p>PPA do ondrej:</p>
<pre><code>sudo<span class="hljs-built_in"> add-apt-repository </span>-y ppa:ondrej/php
sudo apt-get update
</code></pre><p>Libs mínimas para rodar o Laravel:</p>
<pre><code><span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-xml</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-intl</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-mbstring</span> <span class="hljs-selector-tag">php7</span><span class="hljs-selector-class">.2-mysql</span>
</code></pre>
</section>

<section id="infra-composer" class="slide" data-has-notes="false">
<h2>Composer</h2><p><img src="./images/orchestra.jpg" height="280px"></p>
<p>Instalação do composer globalmente:</p>
<pre><code>curl -s <span class="hljs-string">https:</span><span class="hljs-comment">//getcomposer.org/installer | php</span>
sudo mv composer.phar <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>composer
</code></pre>
</section>

<section id="infra-git" class="slide" data-has-notes="false">
<h3>Git</h3><p><img src="./images/git.png" height="240px"></p>
<pre><code>sudo apt-<span class="hljs-builtin-name">get</span> install -y git
</code></pre><p>Configurações globais:</p>
<pre><code>git<span class="hljs-built_in"> config </span>--global user.name <span class="hljs-string">"joazinho"</span>
git<span class="hljs-built_in"> config </span>--global user.email <span class="hljs-string">"joaozinho@usp.br"</span>
</code></pre>
</section>

<section id="infra-mysql" class="slide" data-has-notes="false">
<h3>Mysql</h3><p><img src="./images/db.png" height="220px"></p>
<pre><code>sudo apt -y <span class="hljs-keyword">install</span> mysql-<span class="hljs-keyword">server</span>
</code></pre><p>Criando usuário e banco:</p>
<pre><code>sudo mysql
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> disciplinas;
<span class="hljs-keyword">GRANT</span> ALL <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> disciplinas.* <span class="hljs-keyword">to</span> disciplinas@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">identified</span> <span class="hljs-keyword">by</span> <span class="hljs-string">'disciplinas'</span>;
quit
</code></pre>
</section>
</section>

<section id="chapter-laravel" class="chapter">
<section id="laravel-intro" class="slide" data-has-notes="false">
<h2>Conhecendo o laravel</h2><p><br><br><br>
<img src="./images/laravel.png"></p>
</section>

<section id="laravel-laravel" class="slide" data-has-notes="false">
<h3>Instalação</h3><p>Criação do projeto com composer:</p>
<pre><code><span class="hljs-string">composer </span><span class="hljs-built_in">create-project</span> <span class="hljs-string">laravel/</span><span class="hljs-string">laravel </span><span class="hljs-string">meu_projeto</span>
</code></pre><p>Inserir informações do banco de dados:</p>
<pre><code><span class="hljs-selector-tag">vim</span> <span class="hljs-selector-class">.env</span>
</code></pre><p>Se estiver tudo correto:</p>
<pre><code><span class="hljs-attribute">php artisan serve</span>
</code></pre>
</section>

<section id="laravel-rotas" class="slide" data-has-notes="false">
<h2>MVC: Rotas</h2><ul>
<li>Encaminhamento da requisição</li>
<li>Closure e Controller</li>
<li>api e web</li>
</ul>
<p>Exemplo:</p>
<pre><code>Route::get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">'gritar!'</span>;
});

Route::get(<span class="hljs-string">'/{n}'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($n)</span> </span>{
    $as = str_repeat(<span class="hljs-string">'a'</span>,$n);
    <span class="hljs-keyword">return</span> <span class="hljs-string">"grit{$a}r!"</span>;
});
</code></pre>
</section>

<section id="laravel-controller" class="slide" data-has-notes="false">
<h2>Controller</h2><p>Criação da classe básica do controller:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:controller</span> <span class="hljs-selector-tag">IndexController</span>
</code></pre><p>Encaminhar requisição na rota para controller:</p>
<pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/'</span>,<span class="hljs-string">'IndexController@gritar'</span>);
Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/{n}'</span>,<span class="hljs-string">'IndexController@gritarMultiplo'</span>);
</code></pre><p>Agora, mover código da closure para os controller.</p>
</section>

<section id="laravel-view" class="slide" data-has-notes="false">
<h2>view</h2><p>No método do controller, retornar uma view:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">view</span><span class="hljs-params">(<span class="hljs-string">'gritar'</span>)</span></span>;
</code></pre><p>Criar o arquivo <strong>resources/views/gritar.blade.php</strong>:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Gritar<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
</section>

<section id="laravel-projeto_disciplinas" class="slide" data-has-notes="false">
<h3>Projeto disciplinas</h3><p><img src="./images/github.png" height="100px"></p>
<ul>
<li>Fazer fork do projeto disciplinas_<strong>seunome</strong></li>
<li>Fazer um clone do seu fork para a VM</li>
<li>Criar uma branch para issue que irá trabalhar</li>
<li>Adicionar e commitar mudanças na branch</li>
<li>Fazer push da branch para origin</li>
<li>Criar Pull Request</li>
</ul>
</section>

<section id="laravel-update_master" class="slide" data-has-notes="false">
<h3>Atualizando master local</h3><ul>
<li><p>Adicionar remote upstream</p>
<pre><code>git remote <span class="hljs-keyword">add</span><span class="bash"> upstream URL</span>
</code></pre></li>
<li><p>Atualizar remotes</p>
<pre><code><span class="hljs-attribute">git remote update</span>
</code></pre></li>
<li><p>Fazer merge do master do upstream com master local</p>
<pre><code>git checkout <span class="hljs-keyword">master</span>
<span class="hljs-title">git</span> merge upstream/<span class="hljs-literal">master</span>
</code></pre></li>
</ul>
</section>

<section id="laravel-issues" class="slide" data-has-notes="false">
<h2>Issues cadastradas no github</h2><p><small></p>
<ul>
<li>issue 1: Criação de Resource para Disciplinas, com model, controller e migrations</li>
<li>issue 2: Implementação do método index (criar exemplos com o tinker)</li>
<li>issue 3: Implementar método show, ou seja, criação de página que mostra a disciplina e sua ementa</li>
<li>issue 4: Criação de formulário para cadastro de disciplina. Persistir</li>
<li>issue 5: Criação de formulário para edição de disciplina. Persistir</li>
<li>issue 6: Implementar opção de delete de disciplina. Mostrar botão no index</li>
<li>issue 7: Criar model e migrations para Turmas</li>
<li>issue 8: Implementar relacionamento entre os Model de Turma e Disciplina</li>
<li>issue 9: Criação de formulário para cadastro de turma no contexto da disciplina. Persistir</li>
<li>issue 10: Listar as turmas cadastradas nas páginas das disciplinas</li>
<li>issue 11: Implementar autenticação de usuário local. Restringir acesso de cadastro de turma e disciplina para usuários logados.</li>
<li>issue 12: Implementar busca por nome da disciplina</li>
</ul>
<p></small></p>
</section>

<section id="laravel-issues-opcionais" class="slide" data-has-notes="false">
<h2>Issues opcionais</h2><p><small></p>
<ul>
<li>issue 13: Criar o template master usando um exemplo do bootstrap4. Fazer todos outros templetes herdarem o estilo do template master</li>
<li>issue 14: Implementar calendário do tipo datepicker (jquery ou bootstrap) nos campos de data início e fim do cadastro de turma</li>
</ul>
<p></small></p>
</section>

<section id="laravel-ambiente" class="slide" data-has-notes="false">
<h2>Ambiente do curso</h2><p><img src="./images/ambiente.jpg" height="420px" /></p>
</section>
</section>

<section id="chapter-issue-1" class="chapter">
<section id="issue-1-index" class="slide" data-has-notes="false">
<h1>Issue 1</h1><p>Criação de Resource para Disciplinas, com model, controller e migrations
(criar exemplos com o tinker)</p>
</section>

<section id="issue-1-migration" class="slide" data-has-notes="false">
<p>Gerar model para Disciplina:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:model</span> <span class="hljs-selector-tag">Disciplina</span> <span class="hljs-selector-tag">-crm</span>
</code></pre><p>Edita migrations e inserir campos para titulo e ementa:</p>
<pre><code>$<span class="hljs-function"><span class="hljs-title">table</span>-&gt;</span>string(<span class="hljs-string">'titulo'</span>);
$<span class="hljs-function"><span class="hljs-title">table</span>-&gt;</span><span class="hljs-keyword">text</span>(<span class="hljs-string">'ementa'</span>);
</code></pre><p>Rodar migrations:</p>
<pre><code><span class="hljs-attribute">php artisan migrate</span>
</code></pre>
</section>

<section id="issue-1-tinker" class="slide" data-has-notes="false">
<p>Cadastrar disciplinas usando tinker:</p>
<pre><code><span class="hljs-attribute">php artisan tinker</span>
</code></pre><p>Cadastre:</p>
<ul>
<li>Filosofia I:</li>
<li>Filosofia Grega e Romana</li>
</ul>
<p><br>
<br>
<br></p>
<div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-2" class="chapter">
<section id="issue-2-index" class="slide" data-has-notes="false">
<h1>Issue 2</h1><p>Implementação do método index</p>
</section>

<section id="issue-2-rotas" class="slide" data-has-notes="false">
<p>Rota resource e rota adicional para raiz do sistema:</p>
<pre><code>Route::get(<span class="hljs-string">'/'</span>,<span class="hljs-string">'DisciplinaController@index'</span>);
Route::resource(<span class="hljs-string">'disciplinas'</span>,<span class="hljs-string">'DisciplinaController'</span>)
</code></pre><p>Implementar método index do controller disciplina:</p>
<pre><code><span class="hljs-keyword">return</span> Disciplina::<span class="hljs-keyword">all</span>();
</code></pre><p>Agora usando view:</p>
<pre><code><span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.index'</span>,[<span class="hljs-string">'disciplinas'</span> =&gt; $disciplinas]);
</code></pre>
</section>

<section id="issue-2-template" class="slide" data-has-notes="false">
<p>Template para listar disciplinas:</p>
<pre><code><span class="hljs-comment"># resources/views/disciplinas/index.blade.php</span>

&lt;ul&gt;
@<span class="hljs-keyword">foreach</span> ($disciplinas <span class="hljs-keyword">as</span> $disciplina)
    &lt;li&gt;{{ $disciplina-&gt;titulo }} &lt;/li&gt;
@<span class="hljs-keyword">endforeach</span>
&lt;/ul&gt;
</code></pre><p>Qual você prefere?</p>
<pre><code><span class="hljs-number">1</span>: [<span class="hljs-string">'disciplinas'</span> =&gt; $disciplinas]
<span class="hljs-number">2</span>: compact(<span class="hljs-string">'disciplinas'</span>)
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-3" class="chapter">
<section id="issue-3-index" class="slide" data-has-notes="false">
<h1>Issue 3</h1><p>Implementar método show, ou seja, criação de página que mostra a disciplina e sua ementa</p>
</section>

<section id="issue-3-show" class="slide" data-has-notes="false">
<p>Implementar o método show para disciplina:</p>
<pre><code><span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.show'</span>,compact(<span class="hljs-string">'disciplina'</span>));
</code></pre><p>Template para show:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-template-variable">{{ $disciplina-&gt;titulo }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><span class="hljs-template-variable">{{ $disciplina-&gt;ementa }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
</code></pre><p>Link em index.blade.php</p>
<pre><code>&lt;a <span class="hljs-attribute">href</span>=<span class="hljs-string">"/disciplinas/{{ <span class="hljs-variable">$disciplina</span>-&gt;id }}"</span>&gt;
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-4" class="chapter">
<section id="issue-4-index" class="slide" data-has-notes="false">
<h1>Issue 4</h1><p>Criação de formulário para cadastro de disciplina. Persistir</p>
</section>

<section id="issue-4-cadastro" class="slide" data-has-notes="false">
<p>Criar um formumário html para cadastro de disciplina:</p>
<pre><code>&lt;form method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span> action=<span class="hljs-string">"/disciplinas"</span>&gt;
    {{ csrf_field() }}
    Nome: &lt;input name=<span class="hljs-string">"titulo"</span>&gt;
    Ementa: &lt;textarea name=<span class="hljs-string">"ementa"</span>&gt; &lt;/textarea&gt;
    &lt;button type=<span class="hljs-string">"submit"</span>&gt; Salvar &lt;/button&gt;
&lt;/form&gt;
</code></pre><p>No método create retornar o formulário:</p>
<pre><code><span class="hljs-function"><span class="hljs-keyword">return</span> <span class="hljs-title">view</span><span class="hljs-params">(<span class="hljs-string">'disciplinas.create'</span>)</span></span>;
</code></pre>
</section>

<section id="issue-4-store" class="slide" data-has-notes="false">
<p>Checar rota para submissão (já criada):</p>
<pre><code>php artisan route:<span class="hljs-built_in">list</span>
</code></pre><p>No método store, salvar no banco de dados:</p>
<pre><code> $disciplina = <span class="hljs-keyword">new</span> Disciplina;
 $disciplina-&gt;titulo = $request-&gt;titulo;
 $disciplina-&gt;ementa = $request-&gt;ementa;
 $disciplina-&gt;save();
 <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'/'</span>);
</code></pre><p>Agora podemos colocar um botão no index.blade.php para cadastrar nova disciplina. Do it!</p>
<div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-5" class="chapter">
<section id="issue-5-index" class="slide" data-has-notes="false">
<h1>Issue 5</h1><p>Criação de formulário para edição de disciplina. Persistir</p>
</section>

<section id="issue-5-edit" class="slide" data-has-notes="false">
<p>Formulário para editar disciplina:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/disciplinas/</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;id  }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>
    </span><span class="hljs-template-variable">{{ csrf_field() }}</span><span class="xml">
    </span><span class="hljs-template-variable">{{ method_field('patch') }}</span><span class="xml">
    Nome: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"titulo"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;titulo }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>
    Ementa: <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ementa"</span>&gt;</span> </span><span class="hljs-template-variable">{{ $disciplina-&gt;ementa }}</span><span class="xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span> Salvar <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
</code></pre><p>Renderizar formulário no método edit:</p>
<pre><code><span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.edit'</span>,compact(<span class="hljs-string">'disciplina'</span>));
</code></pre>
</section>

<section id="issue-5-update" class="slide" data-has-notes="false">
<p>Persistir mudança no método update:</p>
<pre><code>    <span class="hljs-variable">$disciplina</span>-&gt;titulo = <span class="hljs-variable">$request</span>-&gt;titulo;
    <span class="hljs-variable">$disciplina</span>-&gt;ementa = <span class="hljs-variable">$request</span>-&gt;ementa;
    <span class="hljs-variable">$disciplina</span>-&gt;save();
    <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">"/disciplinas/$disciplina-&gt;id"</span>);
</code></pre><p>Em index.blade.php inserir link de edição de disciplina:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/disciplinas/</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;id }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/edit"</span>&gt;</span> Editar <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-6" class="chapter">
<section id="issue-6-index" class="slide" data-has-notes="false">
<h1>Issue 6</h1><p>Implementar opção de delete de disciplina. Mostrar botão no index</p>
</section>

<section id="issue-6-delete" class="slide" data-has-notes="false">
<p>Fazer um formumlário de delete em index.blade.php:</p>
<pre><code>&lt;form method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span> action=<span class="hljs-string">"/disciplina/{{ $disciplina-&gt;id }}"</span>&gt;
    {{ csrf_field() }} 
    {{ method_field('delete') }}
    &lt;button type=<span class="hljs-string">"submit"</span>&gt;Apagar&lt;/button&gt;
&lt;/form&gt;
</code></pre><p>Implementar o método destroy:</p>
<pre><code><span class="hljs-variable">$disciplina</span>-&gt;delete();
<span class="hljs-keyword">return</span> redirect(<span class="hljs-string">'/'</span>);
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-7" class="chapter">
<section id="issue-7-index" class="slide" data-has-notes="false">
<h1>Issue 7</h1><p>Criar model e migrations para Turmas</p>
</section>

<section id="issue-7-migration" class="slide" data-has-notes="false">
<p>Criar o model para cadastro de turma:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:model</span> <span class="hljs-selector-tag">Turma</span> <span class="hljs-selector-tag">-m</span>
</code></pre><p>Inserir os campos na migration:</p>
<pre><code><span class="hljs-variable">$table</span>-&gt;string(<span class="hljs-string">'ministrante'</span>);
<span class="hljs-variable">$table</span>-&gt;date(<span class="hljs-string">'inicio'</span>);
<span class="hljs-variable">$table</span>-&gt;date(<span class="hljs-string">'fim'</span>);
<span class="hljs-variable">$table</span>-&gt;text(<span class="hljs-string">'bibliografia'</span>)-&gt;nullable();
<span class="hljs-variable">$table</span>-&gt;integer(<span class="hljs-string">'disciplina_id'</span>)-&gt;unsigned();
<span class="hljs-variable">$table</span>-&gt;foreign(<span class="hljs-string">'disciplina_id'</span>)-&gt;references(<span class="hljs-string">'id'</span>)-&gt;on(<span class="hljs-string">'disciplinas'</span>);
</code></pre><p>Rodar migrations:</p>
<pre><code><span class="hljs-attribute">php artisan migrate</span>
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-8" class="chapter">
<section id="issue-8-index" class="slide" data-has-notes="false">
<h1>Issue 8</h1><p>Implementar relacionamento entre os Model de Turma e Disciplina.
Testar novos métodos no Tinker</p>
</section>

<section id="issue-8-model" class="slide" data-has-notes="false">
<p>No model Turma:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disciplina</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;belongsTo(<span class="hljs-string">'App\Disciplina'</span>);
}
</code></pre><p>No model de Disciplina:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">turmas</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;hasMany(<span class="hljs-string">'App\Turma'</span>);
}
</code></pre>
</section>

<section id="issue-8-tinker" class="slide" data-has-notes="false">
<p>tinker:</p>
<pre><code>$d = <span class="hljs-keyword">new</span> Disciplina;
$d-&gt;ementa = <span class="hljs-string">'Filosofia Grega e Romana'</span>
$d-&gt;titulo = <span class="hljs-string">"Filosofia I"</span>
$d-&gt;save()

$t = <span class="hljs-keyword">new</span> Turma;
$t-&gt;ministrante = <span class="hljs-string">'Pedro'</span>
$t-&gt;inicio = <span class="hljs-string">'2015-10-10'</span>
$t-&gt;fim = <span class="hljs-string">'2016-10-10'</span>
$t-&gt;disciplina_id = $d-&gt;id
$t-&gt;save()

$d-&gt;turmas
$d-&gt;turmas[<span class="hljs-number">0</span>]-&gt;ministrante
$t-&gt;disciplina
$t-&gt;disciplina-&gt;ementa
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-9" class="chapter">
<section id="issue-9-index" class="slide" data-has-notes="false">
<h1>Issue 9</h1><p>Criação de formulário para cadastro de turma no contexto da disciplina. Persistir</p>
</section>

<section id="issue-9-create" class="slide" data-has-notes="false">
<p>No controler de disciplina, método para inserção de turma:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createTurma</span><span class="hljs-params">($disciplina_id)</span>
</span>{
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.turmas.create'</span>,compact(<span class="hljs-string">'disciplina_id'</span>));
}
</code></pre><p>Rota para inserir turma:</p>
<pre><code>Route::<span class="hljs-keyword">get</span>(<span class="hljs-string">'/disciplinas/{disciplina_id}/turmas/create'</span>,<span class="hljs-string">'DisciplinaController@createTurma'</span>);
</code></pre><p>Botão para inserir turma no show de disciplina:</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/disciplinas/</span></span></span><span class="hljs-template-variable">{{ $disciplina-&gt;id }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">/turmas/create"</span>&gt;</span>Inserir Turma<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>
</code></pre>
</section>

<section id="issue-9-form" class="slide" data-has-notes="false">
<p>Formulário para cadastro de turma:</p>
<pre><code>&lt;<span class="hljs-selector-tag">form</span> method=<span class="hljs-string">"POST"</span> action=<span class="hljs-string">"/disciplinas/{{ $disciplina_id }}/turmas"</span>&gt;
    {{ csrf_field() }}

    Ministrante: &lt;<span class="hljs-selector-tag">input</span> name=<span class="hljs-string">"ministrante"</span>&gt;

    Data <span class="hljs-keyword">in</span>ício: &lt;<span class="hljs-selector-tag">input</span> name=<span class="hljs-string">"inicio"</span>&gt;

    Data fim: &lt;<span class="hljs-selector-tag">input</span> name=<span class="hljs-string">"fim"</span>&gt;

    Bibliografia: &lt;<span class="hljs-selector-tag">textarea</span> name=<span class="hljs-string">"bibliografia"</span>&gt;&lt;/textarea&gt;

    &lt;<span class="hljs-selector-tag">button</span> type=<span class="hljs-string">"submit"</span> class=<span class="hljs-string">"btn btn-success"</span>&gt; Salvar &lt;/button&gt;
&lt;/form&gt;
</code></pre>
</section>

<section id="issue-9-store" class="slide" data-has-notes="false">
<p>Criar uma rota para store de turma:</p>
<pre><code>Route::post(<span class="hljs-string">'/disciplinas/{disciplina_id}/turmas'</span>,<span class="hljs-string">'DisciplinaController@storeTurma'</span>);
</code></pre><p>Criar o método store turma:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">storeTurma</span><span class="hljs-params">(Request $request, $disciplina_id)</span>
</span>{
    $turma = <span class="hljs-keyword">new</span> \App\Turma;
    $turma-&gt;ministrante = $request-&gt;ministrante;
    $turma-&gt;inicio = $request-&gt;inicio;
    $turma-&gt;fim = $request-&gt;fim;
    $turma-&gt;bibliografia = $request-&gt;bibliografia;
    $turma-&gt;disciplina_id = $request-&gt;disciplina_id;
    Disciplina::find($disciplina_id)-&gt;turmas()-&gt;save($turma);
    <span class="hljs-keyword">return</span> redirect(<span class="hljs-string">"/disciplinas/$disciplina_id"</span>);
}
</code></pre>
</section>
</section>

<section id="chapter-issue-10" class="chapter">
<section id="issue-10-index" class="slide" data-has-notes="false">
<h1>Issue 10</h1><p>Listar as turmas cadastradas nas páginas das disciplinas</p>
</section>

<section id="issue-10-disciplina" class="slide" data-has-notes="false">
<p>Mostrar as turmas, no show da disciplina:</p>
<pre><code>@<span class="hljs-keyword">foreach</span> ($disciplina-&gt;turmas <span class="hljs-keyword">as</span> $turma)
    {{ $turma-&gt;ministrante }}
    {{ $turma-&gt;inicio }}
@<span class="hljs-keyword">endforeach</span>
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-11" class="chapter">
<section id="issue-11-index" class="slide" data-has-notes="false">
<h1>Issue 11</h1><p>Implementar autenticação de usuário local. Restringir acesso de cadastro de turma e disciplina para usuários logados.</p>
</section>

<section id="issue-11-auth" class="slide" data-has-notes="false">
<p>Autenticação:</p>
<pre><code><span class="hljs-selector-tag">php</span> <span class="hljs-selector-tag">artisan</span> <span class="hljs-selector-tag">make</span><span class="hljs-selector-pseudo">:auth</span>
</code></pre><p>Deixar os métodos index e show públicos e os demais privados.</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">$this</span>-&gt;middleware(<span class="hljs-string">'auth'</span>)-&gt;except([<span class="hljs-string">'index'</span>,<span class="hljs-string">'show'</span>]);
}
</code></pre>
</section>

<section id="issue-11-login" class="slide" data-has-notes="false">
<p>Inserir botão de login no master.blade.php</p>
<pre><code>@auth
    &lt;form id=<span class="hljs-string">"logout-form"</span> action=<span class="hljs-string">"/logout"</span> method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>&gt; 
        {{ csrf_field() }}
        &lt;button type=<span class="hljs-string">"submit"</span>&gt;Sair &lt;/button&gt;
    &lt;/form&gt;
@else
    &lt;a href=<span class="hljs-string">"/login"</span>&gt;Login&lt;/a&gt;
    &lt;a href=<span class="hljs-string">"/register"</span>&gt;Register&lt;/a&gt;
@endauth
</code></pre><p>Nas views geradas na pasta resources/views/auth 
extender layout padrão:</p>
<pre><code>@<span class="hljs-keyword">extends</span>('<span class="hljs-keyword">layouts</span>.<span class="hljs-keyword">master</span>')
</code></pre>
</section>
</section>

<section id="chapter-issue-12" class="chapter">
<section id="issue-12-index" class="slide" data-has-notes="false">
<h1>Issue 12</h1><p>Implementar busca por nome da disciplina</p>
</section>

<section id="issue-12-controller" class="slide" data-has-notes="false">
<p>Buscar:</p>
<pre><code><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span><span class="hljs-params">(Request $request)</span>
</span>{
    $text = $request-&gt;text;
    $disciplinas = Disciplina::where(<span class="hljs-string">'titulo'</span>, <span class="hljs-string">'LIKE'</span>, <span class="hljs-string">"%{$text}%"</span>)-&gt;get();
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'disciplinas.index'</span>,compact(<span class="hljs-string">'disciplinas'</span>));
}
</code></pre><p>Rota:</p>
<pre><code>Route::post(<span class="hljs-string">'/disciplinas/search'</span>,<span class="hljs-string">'DisciplinaController@search'</span>);
</code></pre>
</section>

<section id="issue-12-form" class="slide" data-has-notes="false">
<p>Campo de busca no template master:</p>
<pre><code>&lt;form method=<span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span> action=<span class="hljs-string">"/disciplinas/search"</span>&gt;
    {{ csrf_field() }}
    &lt;input name=<span class="hljs-string">"text"</span> type=<span class="hljs-string">"text"</span>&gt;
    &lt;button type=<span class="hljs-string">"submit"</span>&gt; Buscar &lt;/button&gt;
&lt;/form&gt;
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-13" class="chapter">
<section id="issue-13-index" class="slide" data-has-notes="false">
<h1>Issue 13</h1><p>Criar o template master usando um exemplo do bootstrap4. Fazer todos outros templetes herdarem o estilo do template master</p>
</section>

<section id="issue-13-example" class="slide" data-has-notes="false">
<p>Vamos usar o exemplo do bootstrap:</p>
<pre><code><span class="hljs-attribute">sticky-footer-navbar</span>
</code></pre><p>Adaptar o layout para nosso projeto:</p>
<ul>
<li>Copiar o index para layouts/master.blade.php</li>
<li>Copiar o css do tema para public/css/app.css (BAD PRACTICE)</li>
<li>Colocar link de app.css no master.blade.php</li>
<li>Limpar conteúdo e criar uma seção content: </li>
</ul>
<pre><code>@<span class="hljs-built_in">yield</span> (<span class="hljs-string">'content'</span>)
</code></pre>
</section>

<section id="issue-13-cdn" class="slide" data-has-notes="false">
<p>Mude tudo para CDN (BAD PRACTICE)</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://code.jquery.com/jquery-3.2.1.slim.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Datepicker:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/locales/bootstrap-datepicker.pt-BR.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</section>

<section id="issue-13-extends" class="slide" data-has-notes="false">
<p>Nas views de index, edit, show e create estender master e usar a seção:</p>
<pre><code><span class="hljs-variable">@extends</span> (<span class="hljs-string">'master'</span>)
<span class="hljs-variable">@section</span> (<span class="hljs-string">'content'</span>)
    seu conteúdo
<span class="hljs-variable">@endsection</span>
</code></pre><p><strong>Now we have power!</strong></p>
<p>Use as classes do bootstrap para deixar mais <em>bunitinho</em> (tabelas, buttons e forms)</p>
<div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="chapter-issue-14" class="chapter">
<section id="issue-14-index" class="slide" data-has-notes="false">
<h1>Issue 14</h1><p>Implementar calendário do tipo datepicker (jquery ou bootstrap) nos campos de data início e fim do cadastro de turma</p>
</section>

<section id="issue-14-date" class="slide" data-has-notes="false">
<p>Que tal formatar as datas no blade?</p>
<pre><code>Carbon\<span class="hljs-symbol">Carbon:</span><span class="hljs-symbol">:parse</span>(<span class="hljs-variable">$turma</span>-&gt;inicio)-&gt;format(<span class="hljs-string">'d/m/Y'</span>) 
</code></pre><p>Que tal usar um calendário no cadastrato da turma?</p>
<pre><code>$(<span class="hljs-string">'.datepicker'</span>).datepicker({
    <span class="hljs-keyword">format</span>: <span class="hljs-string">'dd/mm/yyyy'</span>,
    language: <span class="hljs-string">'pt-BR'</span>
});
</code></pre><p>No controller:</p>
<pre><code><span class="hljs-keyword">use</span> <span class="hljs-title">Carbon</span>\<span class="hljs-title">Carbon</span>;
Carbon::createFromFormat(<span class="hljs-string">'d/m/Y'</span>, $request-&gt;inicio)
</code></pre><p>Que tal ordernar pela da de início?</p>
<pre><code>@<span class="hljs-keyword">foreach</span> ($disciplina-&gt;turmas-&gt;sortByDesc(<span class="hljs-string">'inicio'</span>) <span class="hljs-keyword">as</span> $turma)
</code></pre><div style="color:red;">!!! teste e commit !!!</div>
</section>
</section>

<section id="fim" class="slide" data-has-notes="false">
<p><br><br></p>
<h2>Obrigado!</h2>
</section></div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: Reveal.getQueryHash().transition || 'slide', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [
        //{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
    </script>

    <script src="js/dynamic-theme.js"></script><script src="js/custom.js"></script>

  </body>
</html>
